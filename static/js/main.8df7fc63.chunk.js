(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__12Nzg",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__3YPvz"}},11:function(e,t,a){e.exports={Overlay:"Modal_Overlay__3-hKx",Modal:"Modal_Modal__1ecI0"}},13:function(e,t,a){e.exports={Button:"Button_Button__3oTHJ"}},20:function(e,t,a){},21:function(e,t,a){},4:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__q0poi",SearchForm:"Searchbar_SearchForm__1tDPS",SearchFormButton:"Searchbar_SearchFormButton__294Bt",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__1qR1t",SearchFormInput:"Searchbar_SearchFormInput__2Kizg"}},44:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a.n(r),o=a(6),i=a.n(o),l=(a(20),a(3)),s=(a(21),a(4)),u=a.n(s);var m=function(e){var t=Object(r.useState)(""),a=Object(l.a)(t,2),c=a[0],o=a[1];return Object(n.jsx)("header",{className:u.a.Searchbar,children:Object(n.jsxs)("form",{className:u.a.SearchForm,onSubmit:function(t){if(t.preventDefault(),""===c)return alert("Enter search query");e.onSubmit(c)},children:[Object(n.jsx)("button",{type:"submit",className:u.a.SearchFormButton,children:Object(n.jsx)("span",{className:u.a.SearchFormButtonLabel,children:"Search"})}),Object(n.jsx)("input",{className:u.a.SearchFormInput,type:"text",autoComplete:"off",placeholder:"Search images and photos",value:c,onChange:function(e){return o(e.target.value)}})]})})},b=a(12);var j=function(e,t){return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=19671596-fb2ad7f18cbadd6cbe4c4fc90&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.ok?e.json():Promise.reject(new Error("No response from server"))})).then((function(e){return e.hits.map((function(e){return{webformatURL:e.webformatURL,id:e.id,largeImageURL:e.largeImageURL}}))}))},h=a(10),d=a.n(h);var f=function(e){var t=e.src,a=e.largeImage,r=e.openModal;return Object(n.jsx)("li",{className:d.a.ImageGalleryItem,children:Object(n.jsx)("img",{src:t,alt:"","data-largeimage":a,className:d.a.ImageGalleryItemImage,onClick:r})})},g=a(13),O=a.n(g);var p=function(e){var t=e.onClick;return Object(n.jsx)("button",{type:"button",className:O.a.Button,onClick:t,children:"Load more"})},v=(a(22),a(14)),_=a.n(v),S=a(8),I=a.n(S);var x=function(e){var t=e.query,a=e.openModal,c=Object(r.useState)([]),o=Object(l.a)(c,2),i=o[0],s=o[1],u=Object(r.useState)("idle"),m=Object(l.a)(u,2),h=m[0],d=m[1],g=Object(r.useState)(null),O=Object(l.a)(g,2),v=(O[0],O[1]),S=Object(r.useState)(1),x=Object(l.a)(S,2),y=x[0],F=x[1];Object(r.useEffect)((function(){""!==t&&(d("pending"),F(1),s([]),w(t,y))}),[t]),Object(r.useEffect)((function(){1!==y&&w(t,y)}),[y]);var w=function(e,t){j(e,t).then((function(e){s((function(t){return[].concat(Object(b.a)(t),Object(b.a)(e))})),d("resolved")})).then(setTimeout((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),100)).catch((function(e){d("rejected"),v(e)}))};return"idle"===h?Object(n.jsx)("div",{}):"pending"===h?Object(n.jsx)("div",{className:I.a.Container,children:Object(n.jsx)(_.a,{type:"Puff",color:"#00BFFF",height:100,width:100})}):"resolved"===h?Object(n.jsxs)("div",{className:I.a.Container,children:[Object(n.jsx)("ul",{className:I.a.ImageGallery,children:i.map((function(e,t){var r=e.webformatURL,c=e.largeImageURL;return Object(n.jsx)(f,{src:r,largeImage:c,openModal:a},t)}))}),i.length>11&&Object(n.jsx)(p,{onClick:function(){F((function(e){return e+1}))}})]}):void 0},y=a(11),F=a.n(y),w=document.querySelector("#modal-root");var C=function(e){var t=e.src,a=e.onClose;Object(r.useEffect)((function(){return window.addEventListener("keydown",c),function(){window.removeEventListener("keydown",c)}}),[]);var c=function(e){"Escape"===e.code&&a()};return Object(o.createPortal)(Object(n.jsx)("div",{className:F.a.Overlay,onClick:function(e){e.target===e.currentTarget&&a()},children:Object(n.jsx)("div",{className:F.a.Modal,children:Object(n.jsx)("img",{src:t,alt:""})})}),w)};var L=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(r.useState)(""),i=Object(l.a)(o,2),s=i[0],u=i[1],b=Object(r.useState)(!1),j=Object(l.a)(b,2),h=j[0],d=j[1];return Object(n.jsxs)(n.Fragment,{children:[h&&Object(n.jsx)(C,{src:a,onClose:function(){d(!1),c("")}}),Object(n.jsx)(m,{onSubmit:function(e){return u(e)}}),Object(n.jsx)(x,{query:s,openModal:function(e){d(!0),c(e.currentTarget.dataset.largeimage)}})]})},N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,45)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),c(e),o(e)}))};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(L,{})}),document.getElementById("root")),N()},8:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3Lcqc",Container:"ImageGallery_Container__3aIme"}}},[[44,1,2]]]);
//# sourceMappingURL=main.8df7fc63.chunk.js.map